Необходимо создать роль на Ansible

Роль должна содержать следующие фичи:

1. Роль должна устанавливаться на голую Ubuntu Server 22 LTS, сама подтягивать нужные зависимости и т.п.
2. Заведение групп пользователей.
3. Заведение/отключение юзеров с группой, логином, паролем (и/и и ссш ключом), указанием шелла. Пользователи должны заводиться по списку с помощью оператора loop
Ключ должен приниматься:
   * Как url с публичными ключами (как в профиле гитхаба)
   * Как  строка непосредственно содержащая ключ
5. Опциональное добавление судо пользователей в NOPASWD. Учесть что юзер может и удаляться из этого списка.
6. Отключение "лишних" пользователей, которые не прописаны в инвентори.
7. Опциональное отключение юзера по дате. У пользователя прописывается дата до которой учетная запись действует, при наступлении даты после указанной, учетная запись отключается. Реализовать этот ункт как cron + powershell скрипт. Скрипт должен падать с ошибкой если вдруг что-то в нем пойдет не по плану, а не продолжать выполнение.
8. Проект должен быть покрыт авто-тестами любым удобным способом.
   Фичи роли должны быть помечены тегами, чтобы можно было запускать только конкретную фичу из роли.
 

Оформить код как проект на github/gitlab/etc.

Фичи должны быть оформлены по gitflow, с указанием номера jira-задачи (для каждой фичи свой номер, выбирается произвольно).

Для каждой фичи должен быть создан пулл/мерж-реквест в мастер (можно бранчи фич смержить друг в друга, если одна фича от другой зависит). ни не должны конфликтовать между собой.

 

Тестовый инвентори, плейбуки и скрипты запуска должны быть подготовлены, они должны позволить оценить все реализованные фичи. Можно зашить в тот же проект, в отдельную папку.

Инвентори должно быть оформлено в yaml стиле и содержать три уровня вложенности:

* all hosts
* host group
* host

Нужно учесть что на всех уровнях могут быть расширены или перезаписаны переменные с верхнего уровня, т.е. например на all добавляются главные админы, на группе добавляют еще разработчиков, на уровне хоста еще добавляются юзеры, но при этом некоторые разработчики могут потерять права.

Все пароли должны быть оформлены как секреты ансибла, ключ можно предоставить в readme.

 

В readme проекта должно быть описано (с командами) как плейбуки и тесты запустить на голой Ubuntu Server.